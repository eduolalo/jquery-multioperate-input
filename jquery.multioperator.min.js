/*!
    Multioperator v0.0.1 - 2014-04-24
    jQuery to make operations on same input plugin
    (c) 2014 Christian Rodriguez - http://www.rcchristiane.com.mx/
    license: http://www.opensource.org/licenses/mit-license.php
    
    Depends jquery v1.10.1
*/
(function(a){a.fn.multioperator=function(l){var d=a.extend({keyPress:13,isMoney:true,decimals:2,comma:true},l);var f=new RegExp(/\-|\+/);var k=new RegExp(/\%/);var h=new RegExp(/\/|\*|[x]/i);a(this).on("focusin",function(){var m=a(this).val().trim();if(m!=""){a(this).val(m+" ")}});a(this).on("focusout",function(){a(this).val(a(this).val().trim())});function j(o,n){var p=parseFloat(n);if(!p){return 0}p=Math.abs(p);var m=o*(p/100);p=/\-/.test(n)?o-m:o+m;return p}function b(n,m){var o=parseFloat(m);if(!o){return 0}return n+o}function c(n,m){var o=m.replace(h,"");o=parseFloat(o);if(!o){return}if(/\*|[x]/i.test(m)){return(n*o)}else{if(/\//.test(m)){return(n/o)}}}function e(m,n,o){if(h.test(n)){return c(o,n)}else{if(k.test(n)&&f.test(n)){return j(o,n)}else{if(f.test(n)&&!k.test(n)){return b(o,n)}else{return m}}}}function g(m){m=m.split(".");m[0]=m[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");return m.join(".")}a(this).on("keydown",function(r){if(r.keyCode!==d.keyPress){return}var o=a(this).val();var q=o.replace("$","").replace(",","");var m=q.split(" ");var n=parseFloat(m[0]);if(!n){return}var p=parseFloat(n);for(i in m){if(m[i]!=""&&i!=0){p=e(n,m[i],p)}}p=p.toFixed(d.decimals);if(d.comma){p=g(p)}if(d.isMoney){p="$"+p}a(this).val(p+" ")});return this}}(jQuery));